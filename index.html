<title> Chatter App </title>

<head>

  <script src=https://cdn.pubnub.com/sdk/javascript/pubnub.4.28.2.min.js></script>

</head>


<body>

  <h1 style = "text-align:center; font-size: 60px">Welcome to the Chat!</h1>
  <div>
    <h2> Please Enter Your Name AND HIT ENTER:</h2>
    <input style = "display: inline-block" id=nameinput placeholder="Name">
    <div id= namestatement style = "display: inline-block"></div>
  </div>

  <br>

  <h1>Chat:</h1>

  <div><input id=input placeholder="Message" /></div>
  <br>
    <div id=box></div>


</body>



  <script> (function() {
        var pubnub = new PubNub({
            publishKey: "demo",
            subscribeKey: "demo"
        });

        function $(id) {
            return document.getElementById(id);
        }

        var box = $('box'),
            nameinput = $('nameinput'),
            input = $('input'),
            channel = '10chat-demo';

        pubnub.addListener({
            message: function(obj) {
                box.innerHTML = ('' + obj.message).replace(/[<>]/g, '') + '<br>' + box.innerHTML
            }
        });

        pubnub.subscribe({
            channels: [channel]
        });

        nameinput.addEventListener('keyup', function(e) {
            if ((e.keyCode || e.charCode) === 13) {
                username = nameinput.value
                $('namestatement').innerHTML = "Your name is " + username
                $('nameinput').innerHTML = null
            }
        });

        input.addEventListener('keyup', function(e) {
            if ((e.keyCode || e.charCode) === 13) {
                pubnub.publish({
                    channel: channel,
                    message: nameinput.value + ': ' + input.value,
                    x: (input.value = '')
                });
            }
        });
    })();
</script>
